<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div th:fragment="menue" class="container-fluid">
    <div class="row">
        <nav id="sidebar" class="col-md-2 d-md-block bg-light sidebar navbar-expand-lg collapse navbar-collapse">
            <div class="sidebar-sticky">
                <ul class="nav flex-column">
                    <li class="nav-item" sec:authorize="hasAnyRole('ADMIN','MONITORING')">
                        <a class="nav-link"
                           th:classappend="${#httpServletRequest.getRequestURI().endsWith('/') ? 'active':''}"
                           th:href="@{/}">
                            <span data-feather="settings"></span>
                            Minimale Konfiguration
                        </a>
                    </li>
                    <li class="nav-item" sec:authorize="hasAnyRole('ADMIN','MONITORING')">
                        <a class="nav-link"
                           th:classappend="${#httpServletRequest.getRequestURI().endsWith('/dashboard') ? 'active':''}"
                           th:href="@{/dashboard}">
                            <span data-feather="activity"></span>
                            Dashboard
                        </a>
                    </li>
                    <li class="nav-item" sec:authorize="hasAnyRole('ADMIN')">
                      <a class="nav-link" th:classappend="${#httpServletRequest.getRequestURI().endsWith('/user/settings') ? 'active':''}" th:href="@{/user/settings}">
                        <span data-feather="user"></span>
                        Benutzereinstellungen
                      </a>
                    </li>
                    <li class="nav-item" sec:authorize="hasRole('ADMIN')">
                        <a class="nav-link"
                           th:classappend="${#httpServletRequest.getRequestURI().endsWith('/konfiguration') ? 'active':''}"
                           th:href="@{/konfiguration}">
                            <span data-feather="settings"></span>
                            Konfiguration
                        </a>
                    </li>
                    <li class="nav-item" sec:authorize="hasRole('ADMIN')">
                        <a class="nav-link"
                           th:classappend="${#httpServletRequest.getRequestURI().endsWith('/pop3log') ? 'active':''}"
                           th:href="@{/pop3log}">
                            <span data-feather="info"></span>
                            POP3 Gateway Logs
                        </a>
                    </li>
                    <li class="nav-item" sec:authorize="hasRole('ADMIN')">
                        <a class="nav-link"
                           th:classappend="${#httpServletRequest.getRequestURI().endsWith('/smtplog') ? 'active':''}"
                           th:href="@{/smtplog}">
                            <span data-feather="info"></span>
                            SMTP Gateway Logs
                        </a>
                    </li>
                    <li class="nav-item" sec:authorize="hasRole('ADMIN')">
                <span class="nav-link">
                  <span data-feather="mail"></span>
                  Testtools rund um Mails
                </span>
                        <ul class="nav flex-column ml-4">
                            <li class="nav-item">
                                <a class="nav-link"
                                   th:classappend="${#httpServletRequest.getRequestURI().endsWith('/mailanalyzer') ? 'active':''}"
                                   th:href="@{/mailanalyzer}">
                                    <span data-feather="mail"></span>
                                    Analysieren der Struktur
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                   th:classappend="${#httpServletRequest.getRequestURI().endsWith('/signencrypt') ? 'active':''}"
                                   th:href="@{/signencrypt}">
                                    <span data-feather="mail"></span>
                                    Signieren und Verschlüsseln
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                   th:classappend="${#httpServletRequest.getRequestURI().endsWith('/decryptverify') ? 'active':''}"
                                   th:href="@{/decryptverify}">
                                    <span data-feather="mail"></span>
                                    Entschlüsseln und Verifizieren
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link"
                                   th:classappend="${#httpServletRequest.getRequestURI().endsWith('/sendreceive') ? 'active':''}"
                                   th:href="@{/sendreceive}">
                                    <span data-feather="mail"></span>
                                    Senden und Empfangen
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-item" sec:authorize="isAuthenticated()">
                        <a class="nav-link" href="javascript:{}"
                           onclick="document.getElementById('logout-form').submit();">
                            <span data-feather="log-out"></span>
                            Abmelden
                        </a>
                        <form id="logout-form" th:action="@{/logout}" method="post">
                            <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
                        </form>
                    </li>
                </ul>
                <span class="nav-link font-weight-bold">
            Angemeldeter Nutzer: <span sec:authentication="name">Bob</span>
          </span>
            </div>
        </nav>
    </div>
</div>
</body>
</html>
